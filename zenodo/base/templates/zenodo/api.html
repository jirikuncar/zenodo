{#
## This file is part of Invenio.
## Copyright (C) 2012 CERN.
##
## Invenio is free software; you can redistribute it and/or
## modify it under the terms of the GNU General Public License as
## published by the Free Software Foundation; either version 2 of the
## License, or (at your option) any later version.
##
## Invenio is distributed in the hope that it will be useful, but
## WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
## General Public License for more details.
##
## You should have received a copy of the GNU General Public License
## along with Invenio; if not, write to the Free Software Foundation, Inc.,
## 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
#}
{% extends "page.html" %}

{% block body %}

<div class="row">
<div class="col-sm-3 col-md-3 hidden-print">
<ul class="nav nav-list well ">
  <li class="nav-header">API Documentation</li>
  <li><a href="#">Introduction</i></a></li>
  <li class="nav-header">REST API</li>
  <li><a href="#restapi-intro">Introduction</i></a></li>
  <li><a href="#restapi-quick">Quick start</i></a></li>
  <li><a href="#restapi-versioning">Versioning</i></a></li>
  <li><a href="#restapi-auth">Authentication</i></a></li>
  <li><a href="#restapi-requests">Requests</i></a></li>
  <li><a href="#restapi-responses">Responses</i></a></li>
  <li><a href="#restapi-http">HTTP status codes</i></a></li>
  <li><a href="#restapi-errors">Errors</i></a></li>
  <li><a href="#restapi-res">Resources</i></a></li>
  <li><a href="#restapi-res-dep"><i class="icon-chevron-right"></i> Depositions</i></a></li>
  <li><a href="#restapi-res-files"><i class="icon-chevron-right"></i> Deposition files</i></a></li>
  <li><a href="#restapi-res-actions"><i class="icon-chevron-right"></i> Deposition actions</i></a></li>
  <li><a href="#restapi-rep">Representations</i></a></li>
  {#<li><a href="#restapi-faq">FAQ</i></a></li>#}
  <li><a href="#restapi-changes">Changes</i></a></li>
  <li class="nav-header">OAI-PMH API</li>
  <li><a href="#harvest-baseurl">Base URL</i></a></li>
  <li><a href="#harvest-metadata">Metadata formats</i></a></li>
  <li><a href="#harvest-sets">Sets</i></a></li>
  <li><a href="#harvest-schedule">Update schedule</i></a></li>
  <li><a href="#harvest-ratelimit">Rate limit</i></a></li>
  <li><a href="#harvest-changes">Changes</i></a></li>
  {#<li class="nav-header">Metadata API</li>
  <li><a href="#metadata-url">URL structure</i></a></li>
  <li><a href="#metadata-metadata">Metadata formats</i></a></li>
  <li><a href="#metadata-changes">Changes</i></a></li>#}
</ul>
</div>
<div class="col-sm-9 col-md-9" data-spy="scroll" data-target=".navmenu">
<h1 id="intro"><strong>API Documentation</strong> <small>for developers</small></h1>
<hr />
{{config.CFG_SITE_NAME}} currently offers two different APIs:
<p>
<ul>
<li><strong>REST API</strong> &mdash; includes support for uploading your research outputs.</li>
<li><strong>OAI-PMH API</strong> &mdash; allows you to harvest all or parts of {{config.CFG_SITE_NAME}} via the OAI-PMH protocol.</li>
{#<li><strong>Metadata API</strong> &mdash; machine readable records in several different formats.</li>#}
</ul>
</p>

<h2 id="restapi"><strong>REST API</strong> <small>upload your research outputs</small></h2><hr />
<h2 id="restapi-intro">Introduction</h2>
<p>The REST API allows you to programmatically upload and publish research outputs on {{config.CFG_SITE_NAME}}, with the same functionality which is available in our <a href="{{url_for('webdeposit.index')}}">Upload</a> user interface.</p>

<div class="panel-group dep-accord" id="dep-accord-0">
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-list0">
          <h4 id="restapi-res-">Quick start <small></small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-list0" class="panel-collapse collapse">
      <div style="padding: 9px 15px;">
          <p>This short guide will give a quick overview of how to upload and publish on {{config.CFG_SITE_NAME}}, and will be using Python together with the <a href="http://www.python-requests.org/en/latest/user/install/">Requests</a> package.</p>

<ol>

<li>
<p>First, make sure you have the <a href="http://www.python-requests.org/en/latest/user/install/">Requests</a> module installed:</p>
<pre>$ pip install requests</pre>
</li>

<li><p>Next, fire up a Python command prompt:</p>
<pre>$ python
Python 2.7.5+
[GCC 4.8.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>></pre>
</li>

<li><p>Import the <code>requests</code> and <code>json</code> modules (don't type the <code>>>></code>-part):</p>
<pre>>>> import requests
>>> import json</pre>
</li>

<li><p>Try to access the API:</p>
<pre>>>> r = requests.get("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions")
>>> r.status_code
401
>>> r.json()
{u'status': 401, u'message': u'Unauthorized'}
</pre>
</li>

<li>All API access requires an API key, so <a href="#restapi-auth">create</a> one.</li>

<li><p>Let's try again (replace <code>YOUR_API_KEY</code> with your newly created API key):</p>
<pre>>>> r = requests.get("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions?apikey=YOUR_API_KEY")
>>> r.status_code
200
>>> r.json()
[]</pre>
<p class="muted"><small>Note, if you already uploaded something, the output will be different.</small></p>
</li>

<li><p>Next, let's create a new empty upload:</p>
<pre>>>> headers = {"Content-Type": "application/json"}
>>> r = requests.post("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions?apikey=YOUR_API_KEY", data="{}", headers=headers)
>>> r.status_code
201
>>> r.json()
{u'files': [], u'title': u'', u'created': u'2013-11-14T18:34:08+00:00', u'modified': u'2013-11-14T18:34:08+00:00', u'state': u'unsubmitted', u'owner': 1, u'id': 1234, u'metadata': {}}
>>> deposition_id = r.json()['id']
</pre>
</li>

<li><p>Now, let's upload a new file:</p>
<pre>>>> data = {'filename': 'myfirstfile.csv'}
>>> files = {'file': open('/path/to/myfirstfile.csv', 'rb')}
>>> r = requests.post("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/%s/files?apikey=YOUR_API_KEY" % deposition_id, data=data, files=files)
>>> r.status_code
201
>>> r.json()
{u'checksum': u'2b70e04bb31f2656ce967dc07103297f', u'filename': u'myfirstfile.csv', u'id': u'eb78d50b-ecd4-407a-9520-dfc7a9d1ab2c', u'filesize': u'27'}
</pre>
<p class="muted"><small>Maximum file size is 2GB per file.</small></p>
</li>

<li><p>Last thing missing, is just to add some metadata:</p>
<pre>
>>> data = {"metadata": {"title": "My first upload", "upload_type": "poster", "description": "This is my first upload", "creators": [{"name": "Doe, John", "affiliation": "ZENODO"}]}}
>>> r = requests.put("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/%s?apikey=YOUR_API_KEY" % deposition_id, data=json.dumps(data), headers=headers)
>>> r.status_code
200
</pre>
</li>

<li><p>and, we're ready to publish:</p>
<div class="alert alert-danger">Don't execute this last step - it will put your test upload straight online.</div>
<pre>
>>> r = requests.post("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/%s/actions/publish?apikey=YOUR_API_KEY" % deposition_id)
>>> r.status_code
202
</pre>
</li>
</ol>

      </div>
    </div>
  </div>
</div>



<h2 id="restapi-versioning">Versioning</h2>
<p>
The REST API is versioned. We strive not to make backward incompatible changes to the API, but if we do, we release a new version. {# By default our URL endpoint always provide the latest version. A client can force a specific API version by including the <code>X-API-Version</code> header in the request.</p>#} <a href="#restapi-changes">Changes</a> to the API are documented on this page, and advance notification is given on our <a href="http://twitter.com/zenodo_org">Twitter account</a>.</p>

<h2 id="restapi-auth">Authentication</h2>
<p>All API requests must be authenticated and over HTTPS. Any request over plain HTTP will fail. Currently we support authentication with API keys, but will add support for OAuth 2.0 in the near future as well.</p>

<p><strong>Acquiring API keys</strong>
<ol>
<li><a href="{{url_for('youraccount.register')}}">Register</a> for a ZENODO account if you don't already have one.</li>
<li>Go to your <a href="{{url_for('youraccount.register')}}">profile</a>, and click "Create new key"</li>
<li>Click the "API key" link to view your newly created API key</li>
</ol>
</p>

<div class="alert">
  <strong>Important!</strong> Do not share your API key with anyone else, and only use it over HTTPS.
</div>

<p><strong>Using API keys</strong></p>
<p>The API key must be included in all requests as a URL parameter:</p>

<pre>
{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions?apikey=YOUR_API_KEY_HERE
</pre>

<h2 id="restapi-requests">Requests</h2>
<p>The base URL of the API is <code>{{config.CFG_SITE_SECURE_URL}}/api/</code>.</p>

<p>All <code>POST</code> and <code>PUT</code> request bodies must be JSON encoded, and must have content type of <code>application/json</code> unless specified otherwise in the specific resource (e.g. in the case of file uploads). The API will return a <code>415</code> error (see <a href="#restapi-http">HTTP status codes</a> and <a href="#restapi-errors">error responses</a>) if the wrong content type is provided.</p>


<h2 id="restapi-responses">Responses</h2>
<p>All response bodies are JSON encoded (UTF-8 encoded). A single resource is represented as a JSON
object:</p>
<pre>
{
    "field1": <em>value</em>,
    <em>...</em>
}
</pre>
<p>A collection of resources is represented as a JSON array of objects:</p>
<pre>
[
    {
        "field1": <em>value</em>,
        <em>...</em>
    },
    <em>...</em>
]
</pre>

<p>Timestamps are in UTC and formatted according to <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>:</p>
<pre align="center">YYYY-MM-DDTHH:MM:SS+00:00</pre>

<h2 id="restapi-http">HTTP status codes</h2>
We use the following HTTP status codes to indicate success or failure of a request.

<table class="table table-striped">
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>200</code></td>
<td>OK</td>
<td>Request succeeded. Response included. Usually sent for GET/PUT/PATCH requests.</td>
</tr>
<tr>
<td><code>201</code></td>
<td>Created</td>
<td>Request succeeded. Response included. Usually sent for POST requests.</td>
</tr>
<tr>
<td><code>202</code></td>
<td>Accepted</td>
<td>Request succeeded. Response included. Usually sent for POST requests, where background processing is needed to fulfill the request.</td>
</tr>
<tr>
<td><code>204</code></td>
<td>No Content</td>
<td>Request succeeded. No response included. Usually sent for DELETE requests.</td>
</tr>
<tr>
<td><code>400</code></td>
<td>Bad Request</td>
<td>Request failed. <a href="#restapi-errors">Error response</a> included.</td>
</tr>
<tr>
<td><code>401</code></td>
<td>Unauthorized</td>
<td>Request failed, due to an invalid API key. <a href="#restapi-errors">Error response</a> included.</td>
</tr>
<tr>
<td><code>403</code></td>
<td>Forbidden</td>
<td>Request failed, due to missing authorization (e.g. deleting an already submitted upload). <a href="#restapi-errors">Error response</a> included.
</td>
</tr>
<tr>
<td><code>404</code></td>
<td>Not Found</td>
<td>Request failed, due to the resource not being found. <a href="#restapi-errors">Error response</a> included.</td>
</tr>
<tr>
<td><code>405</code></td>
<td>Method Not Allowed</td>
<td>Request failed, due to unsupported HTTP method. <a href="#restapi-errors">Error response</a> included.</td>
</tr>
<tr>
<td><code>409</code></td>
<td>Conflict</td>
<td>Request failed, due to the current state of the resource (e.g. edit a deopsition which is not fully integrated). <a href="#restapi-errors">Error response</a> included.</td>
</tr>
<tr>
<td><code>415</code></td>
<td>Unsupported Media Type</td>
<td>Request failed, due to missing or invalid request header <code>Content-Type</code>. <a href="#restapi-errors">Error response</a> included.</td>
</tr>
<tr>
<td><code>429</code></td>
<td>Too Many Requests</td>
<td>Request failed, due to rate limiting. <a href="#restapi-errors">Error response</a> included.</td>
</tr>
<tr>
<td><code>500</code></td>
<td>Internal Server Error</td>
<td>Request failed, due to an internal server error. Error response <em>NOT</em> included. Don't worry, {{config.CFG_SITE_NAME}} admins have been notified and will be dealing with the problem ASAP.</td>
</tr>
</tbody>
</table>

<h2 id="restapi-errors">Errors</h2>
<p>
Error responses for 400 series errors (e.g. 400, 401, 403, ...) are returned as a JSON object with two attributes <code>message</code> and <code>status</code> (HTTP status code), and possibly an attribute <code>errors</code> with a list of more detailed errors.</p>

<p>Example of a simple error message without further detailed errors:</p>

<pre>
{
    "message": "Deposition not found",
    "status": 404
}
</pre>

<p>Example of an error message with additional detailed error messages:</p>

<pre>
{
    "message": "Validation error",
    "status": 400,
    "errors": [
        {"code": 10, "message":"Not a valid choice", "field": "access_right"}
    ]
}
</pre>
<p>The attribute <code>errors</code> is a JSON array of objects, with the attributes <code>message</code> and <code>code</code>, and possibly <code>field</code> for validation errors.</p>


<h2 id="restapi-res">Resources</h2>

<h3 id="restapi-res-dep">Depositions</h3>

<div class="panel-group dep-accord" id="dep-accord-1">
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-list">
          <h4 id="restapi-res-">List <small>GET deposit/depositions</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-list" class="panel-collapse collapse">
      <div class="panel-body">
          <table class="table table-striped">
          <tbody>
          <tr>
              <th class="span2">Description</th>
              <td>List all depositions for the currently authenticated user</td>
          </tr>
          <tr>
              <th class="span2">URL</th>
              <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions</td>
          </tr>
          <tr>
              <th>Method</th>
              <td>GET</td>
          </tr>
          <tr>
              <th>Success response</th>
              <td><ul><li><strong>Code:</strong> <code>200 OK</code></li><li><strong>Body</strong>: an array of <a href="#restapi-rep-dep">deposition</a> resources.</li></ul></td>
          </tr>
          <tr>
              <th>Error response</th>
              <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
          </tr>
          <tr>
              <th>Example</th>
              <td>
          <div class="tabbable">
            <ul class="nav nav-pills">
              <li class="active"><a href="#curl" data-toggle="tab">cURL</a></li>
              <li ><a href="#python" data-toggle="tab">Python</a></li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="curl">
                <pre>$ curl -i {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/?apikey=YOUR_API_KEY</pre>
              </div>
              <div class="tab-pane" id="python">
                <pre>import requests
response = requests.get("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/?apikey=YOUR_API_KEY")
print response.json()
                </pre>
              </div>
            </div>
          </div>
              </td>
          </tr>
          </tbody>
          </table>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-create">
        <h4 id="restapi-res-">Create <small>POST deposit/depositions</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-create" class="panel-collapse collapse">
      <div class="panel-body">
<table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Create a new deposition resource.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions</td>
</tr>
<tr>
    <th>Method</th>
    <td>POST</td>
</tr>
<tr>
    <th>Request headers</th>
    <td>Content-Type: application/json</td>
</tr>
<tr>
    <th>Data parameters</th>
    <td><p>An empty JSON object <code>{}</code> or a <a href="#restapi-rep-meta">deposition metadata</a> resource. Example:</p>
    <pre>{
    "metadata": {
        "upload_type": "presentation",
        <em>...</em>
    }
}</pre></td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>201 Created</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-dep">deposition</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-d-create" data-toggle="tab">cURL</a></li>
    <li ><a href="#python" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-d-create">
      <pre>$ curl -i -H "Content-Type: application/json" --data '{}' {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/?apikey=YOUR_API_KEY

<em>or</em>

$ curl -i -H "Content-Type: application/json" -X POST --data '{"metadata": {"title": "My first upload", "upload_type": "poster", "description": "This is my first upload", "creators": [{"name": "Doe, John", "affiliation": "ZENODO"}]}}' {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-d-create">
      <pre>import json
import requests

url = "{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/?apikey=YOUR_API_KEY"
headers = {"Content-Type": "application/json"}
r = requests.post(url, data="{}", headers=headers)

<span class="muted"># or</span>

data = {"metadata": {"title": "My first upload", "upload_type": "poster", "description": "This is my first upload", "creators": [{"name": "Doe, John", "affiliation": "ZENODO"}]}}
r = requests.post(url, data=json.dumps(data), headers=headers)</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
   <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-get">
          <h4 id="restapi-res-">Retrieve <small>GET deposit/depositions/:id</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-get" class="panel-collapse collapse">
      <div class="panel-body">
          <table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Retrieve a single deposition resource.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id</td>
</tr>
<tr>
    <th>Method</th>
    <td>GET</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>200 OK</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-dep">deposition</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-d-get" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-d-get" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-d-get">
      <pre>$ curl -i {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-d-get">
      <pre>import requests

r = requests.get("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234?apikey=YOUR_API_KEY")</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-update">
          <h4 id="restapi-res-">Update <small>PUT deposit/depositions/:id</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-update" class="panel-collapse collapse">
      <div class="panel-body">
        <table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Update an existing deposition resource.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id</td>
</tr>
<tr>
    <th>Method</th>
    <td>PUT</td>
</tr>
<tr>
    <th>Request headers</th>
    <td>Content-Type: application/json</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Data parameters</th>
    <td><p>A <a href="#restapi-rep-meta">deposition metadata</a> resource. Example:</p>
    <pre>{
    "metadata": {
        "upload_type": "presentation",
        <em>...</em>
    }
}</pre></td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>200 OK</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-dep">deposition</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-d-put" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-d-put" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-d-put">
      <pre>$ curl -i -H "Content-Type: application/json" -X PUT --data '{"metadata": {"title": "My first upload", "upload_type": "poster", "description": "This is my first upload", "creators": [{"name": "Doe, John", "affiliation": "ZENODO"}]}}' {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-d-put">
      <pre>import json
import requests

url = "{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234?apikey=YOUR_API_KEY"
headers = {"Content-Type": "application/json"}
data = {"metadata": {"title": "My first upload", "upload_type": "poster", "description": "This is my first upload", "creators": [{"name": "Doe, John", "affiliation": "ZENODO"}]}}

r = requests.put(url, data=json.dumps(data), headers=headers)</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-delete">
          <h4 id="restapi-res-">Delete <small>DELETE deposit/depositions/:id</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-delete" class="panel-collapse collapse">
      <div class="panel-body">
        <table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Delete an existing deposition resource. Note, only unpublished depositions may be deleted.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id</td>
</tr>
<tr>
    <th>Method</th>
    <td>DELETE</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>204 No Content</code></li><li><strong>Body</strong>: Empty.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>
    <ul>
    <li><code>404 Not found</code>: Deposition does not exist.</li>
      <li><code>403 Forbidden</code>: Deleting an already published deposition.</li>
    </ul>

    <p>See also <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</p>
    </td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-d-del" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-d-del" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-d-del">
      <pre>$ curl -i -X DELETE {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-d-del">
      <pre>import requests

r = requests.delete("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234?apikey=YOUR_API_KEY")</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>

      </div>
    </div>
  </div>
</div>






<h3 id="restapi-res-files">Deposition files</h3>

<div class="panel-group dep-accord">
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-f-list">
          <h4 id="restapi-res-">List <small>GET deposit/depositions/:id/files</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-f-list" class="panel-collapse collapse">
      <div class="panel-body">
        <table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>List all deposition files for a given deposition.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/files</td>
</tr>
<tr>
    <th>Method</th>
    <td>GET</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>200 OK</code></li><li><strong>Body</strong>: an array of <a href="#restapi-rep-files">deposition file</a> resources.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-f-list" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-f-list" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-f-list">
      <pre>$ curl -i {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-f-list">
      <pre>import requests

r = requests.get("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files?apikey=YOUR_API_KEY")</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-f-create">
          <h4 id="restapi-res-">Create (upload) <small>POST deposit/depositions/:id/files</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-f-create" class="panel-collapse collapse">
      <div class="panel-body">
        <table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Upload a new file.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/files</td>
</tr>
<tr>
    <th>Method</th>
    <td>POST</td>
</tr>
<tr class="warning">
    <th>Request headers</th>
    <td>Content-Type: multipart/form-data</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Data parameters</th>
    <td>TODO</td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>201 Created</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-files">deposition file</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-f-post" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-f-post" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-f-post">
      <pre>$ curl -i -F name=myfirstfile.csv -F file=@path/to/local_file.csv {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-f-post">
      <pre>import json
import requests

url = "{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files?apikey=YOUR_API_KEY"
data = {'filename': 'myfirstfile.csv'}
files = {'file': open('path/to/local_file.csv', 'rb')}
r = requests.post(url, data=data, files=files)</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-f-sort">
          <h4 id="restapi-res-">Sort <small>PUT deposit/depositions/:id/files</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-f-sort" class="panel-collapse collapse">
      <div class="panel-body">
        <table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Sort the files for a deposition. By default, the first file is shown in the file preview.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/files</td>
</tr>
<tr>
    <th>Method</th>
    <td>PUT</td>
</tr>
<tr>
    <th>Request headers</th>
    <td>Content-Type: application/json</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Data parameters</th>
    <td><p>A JSON array of partial <a href="#restapi-rep-files">deposition file</a> resources with only the <code>id</code> attribute. Example:</p>
    <pre>[
    {"id": "<em>&lt;file id 1&gt;</em>"},
    {"id": "<em>&lt;file id 2&gt;</em>"},
    <em>...</em>
]</pre></td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>200 OK</code></li><li><strong>Body</strong>: an array of <a href="#restapi-rep-files">deposition file</a> resources.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-f-put" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-f-put" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-f-put">
      <pre>$ curl -i -X PUT -H "Content-Type: application/json" --data '[{"id":"21fedcba-9876-5432-1fed-cba987654321"}, {"id":"12345678-9abc-def1-2345-6789abcdef12"}]' {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files?apikey=YOUR_API_KEY
</pre>
    </div>
    <div class="tab-pane" id="python-f-put">
      <pre>import json
import requests

url = "{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files?apikey=YOUR_API_KEY"
headers = {"Content-Type": "application/json"}
data = [{'id': '21fedcba-9876-5432-1fed-cba987654321'}, {'id': '12345678-9abc-def1-2345-6789abcdef12'}]

r = requests.put(url, data=json.dumps(data), headers=headers)</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-f-get">
          <h4 id="restapi-res-">Retrieve <small>GET deposit/depositions/:id/files/:file_id</small> <span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-f-get" class="panel-collapse collapse">
      <div class="panel-body">
<table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Retrieve a single deposition file.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/files/:file_id</td>
</tr>
<tr>
    <th>Method</th>
    <td>GET</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
            <li><strong>file_id:</strong> Deposition file identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>200 OK</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-files">deposition file</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-f-get" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-f-get" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-f-get">
      <pre>$ curl -i {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files/12345678-9abc-def1-2345-6789abcdef12?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-f-get">
      <pre>import requests

r = requests.get("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files/12345678-9abc-def1-2345-6789abcdef12?apikey=YOUR_API_KEY")</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-f-update">
          <h4 id="#restapi-obj-deposition-file">Update <small>PUT deposit/depositions/:id/files/:file_id</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-f-update" class="panel-collapse collapse">
      <div class="panel-body">
        <table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Update a deposition file resource. Currently the only use is renaming an already uploaded file. If you one to replace the actual file, please delete the file and upload a new file.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/files/:file_id</td>
</tr>
<tr>
    <th>Method</th>
    <td>PUT</td>
</tr>
<tr>
    <th>Request headers</th>
    <td>Content-Type: application/json</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
            <li><strong>file_id:</strong> Deposition file identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Data parameters</th>
    <td><p>A partial <a href="#restapi-rep-files">deposition file</a> resources with only the <code>filename</code> attributes. Example:</p>
    <pre>{
    "filename": "<em>&lt;new name&gt;</em>"
}
</pre></td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>200 OK</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-files">deposition file</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-f-put-1" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-f-put-1" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-f-put-1">
      <pre>$ curl -i -X PUT -H "Content-Type: application/json" --data '{"filename": "someothername.csv"}' {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files/21fedcba-9876-5432-1fed-cba987654321?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-f-put-1">
      <pre>import json
import requests

url = "{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files/21fedcba-9876-5432-1fed-cba987654321?apikey=YOUR_API_KEY"
headers = {"Content-Type": "application/json"}
data = {"filename": "someothername.csv"}

r = requests.put(url, data=json.dumps(data), headers=headers)</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-f-delete">
          <h4 id="restapi-res-">Delete <small>DELETE deposit/depositions/:id/files/:file_id</small><span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-f-delete" class="panel-collapse collapse">
      <div class="panel-body">
        <table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Delete an existing deposition file resource. Note, only deposition files for unpublished depositions may be deleted.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/files/:file_id</td>
</tr>
<tr>
    <th>Method</th>
    <td>DELETE</td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
            <li><strong>file_id:</strong> Deposition file identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>204 No Content</code></li><li><strong>Body</strong>: Empty.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>
    <ul>
      <li><code>404 Not found</code>: Deposition file does not exist.</li>
      <li><code>403 Forbidden</code>: Deleting an already published deposition.</li>
    </ul>

    <p>See also <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</p>
    </td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-f-del" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-f-del" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-f-del">
      <pre>$ curl -i -X DELETE {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files/21fedcba-9876-5432-1fed-cba987654321?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-f-del">
      <pre>import requests

r = requests.delete("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/files/21fedcba-9876-5432-1fed-cba987654321?apikey=YOUR_API_KEY")</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
      </div>
    </div>
  </div>
</div>


<h3 id="restapi-res-actions">Deposition actions</h3>


<div class="panel-group dep-accord">
<div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-a-publish">
          <h4 id="restapi-res-">Publish <small>POST deposit/depositions/:id/actions/publish</small> <span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-a-publish" class="panel-collapse collapse">
      <div class="panel-body">

<table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Publish a deposition. Note, once a deposition is published, you can no longer delete it.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/actions/publish</td>
</tr>
<tr>
    <th>Method</th>
    <td>POST</td>
</tr>
<tr class="warning">
    <th>Request headers</th>
    <td><em>None</em></td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>202 Accepted</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-dep">deposition</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-a-pub" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-a-pub" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-a-pub">
      <pre>$ curl -i -X POST {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/actions/publish?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-a-pub">
      <pre>import requests

r = requests.post("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/actions/publish?apikey=YOUR_API_KEY")</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
</div>
    </div>
  </div>




<div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-a-edit">
          <h4 id="restapi-a-edit">Edit <small>POST deposit/depositions/:id/actions/edit</small> <span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-a-edit" class="panel-collapse collapse">
      <div class="panel-body">

<table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Unlock already submitted deposition for editing.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/actions/edit</td>
</tr>
<tr>
    <th>Method</th>
    <td>POST</td>
</tr>
<tr class="warning">
    <th>Request headers</th>
    <td><em>None</em></td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>201 Created</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-dep">deposition</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>
    <ul>
      <li><code>400 Bad Request</code>: Deposition state does not allow for editing (e.g. depositions in state <code>inprogress</code>).</li>
      <li><code>409 Conflict</code>: Deposition is in the process of being integrated, please wait 5 minutes before trying again.</li>
    </ul>
    See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-a-edit" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-a-edit" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-a-edit">
      <pre>$ curl -i -X POST {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/actions/edit?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-a-edit">
      <pre>import requests

r = requests.post("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/actions/edit?apikey=YOUR_API_KEY")</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
</div>
    </div>
  </div>




<div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-a-discard">
          <h4 id="restapi-a-discard">Discard <small>POST deposit/depositions/:id/actions/discard</small> <span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-a-discard" class="panel-collapse collapse">
      <div class="panel-body">

<table class="table table-striped">
<tbody>
<tr>
    <th class="span2">Description</th>
    <td>Discard changes in the current editing session.</td>
</tr>
<tr>
    <th class="span2">URL</th>
    <td>{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/:id/actions/discard</td>
</tr>
<tr>
    <th>Method</th>
    <td>POST</td>
</tr>
<tr class="warning">
    <th>Request headers</th>
    <td><em>None</em></td>
</tr>
<tr>
    <th>URL parameters</th>
    <td>
      <ul>
        <li><strong>Required:</strong>
          <ul>
            <li><strong>id:</strong> Deposition identifier</li>
          </ul>
        </li>
      </ul>
    </td>
</tr>
<tr>
    <th>Success response</th>
    <td><ul><li><strong>Code:</strong> <code>201 Created</code></li><li><strong>Body</strong>: a <a href="#restapi-rep-dep">deposition</a> resource.</li></ul></td>
</tr>
<tr>
    <th>Error response</th>
    <td>
    <ul>
      <li><code>400 Bad Request</code>: Deposition is not being edited.</li>
    </ul>
    See <a href="#restapi-http">HTTP status codes</a> (400 and 500 series errors) and <a href="#restapi-errors">error responses</a>.</td>
</tr>
<tr>
    <th>Example</th>
    <td>
<div class="tabbable">
  <ul class="nav nav-pills">
    <li class="active"><a href="#curl-a-discard" data-toggle="tab">cURL</a></li>
    <li ><a href="#python-a-discard" data-toggle="tab">Python</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="curl-a-discard">
      <pre>$ curl -i -X POST {{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/actions/discard?apikey=YOUR_API_KEY</pre>
    </div>
    <div class="tab-pane" id="python-a-discard">
      <pre>import requests

r = requests.post("{{config.CFG_SITE_SECURE_URL}}/api/deposit/depositions/1234/actions/discard?apikey=YOUR_API_KEY")</pre>
    </div>
  </div>
</div>
    </td>
</tr>
</tbody>
</table>
</div>
    </div>
  </div>




</div>


<h2 id="restapi-rep">Representations</h2>

<p>The following section documents all the object attributes for the above documented resources.</p>

<div class="panel-group dep-accord">
<div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-r-dep">
          <h4 id="restapi-rep-dep">Deposition <small></small> <span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-r-dep" class="panel-collapse collapse">
      <div class="panel-body">
<table class="table table-striped">
<thead>
<tr>
  <th class="span2">Attribute</th>
  <th>Type</th>
  <th>Editable</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
    <td><code>created</code></td>
    <td>Timestamp</td>
    <td>No</td>
    <td>Creation time of deposition (in ISO8601 format).</td>
</tr>
<tr>
    <td><code>doi</code></td>
    <td>String</td>
    <td>No</td>
    <td>Digital Object Identifier (DOI). When you publish your deposition, we register a DOI in <a href="http://www.datacite.org">DataCite</a> for your upload, unless you manually provided us with one. This field is only present for published depositions.</td>
</tr>
<tr>
    <td><code>doi_url</code></td>
    <td>URL</td>
    <td>No</td>
    <td>Persistent link to your published deposition. This field is only present for published depositions.</td>
</tr>
<tr>
    <td><code>files</code></td>
    <td>Array</td>
    <td>Yes</td>
    <td>A list of <a href="#restapi-rep-files">deposition files</a> resources.</td>
</tr>
<tr>
    <td><code>id</code></td>
    <td>Integer</td>
    <td>No</td>
    <td>Deposition identifier</td>
</tr>
<tr>
    <td><code>metadata</code></td>
    <td>Object</td>
    <td>Yes</td>
    <td>A <a href="#restapi-rep-meta">deposition metadata</a> resource</td>
</tr>
<tr>
    <td><code>modified</code></td>
    <td>Timestamp</td>
    <td>No</td>
    <td>Last modification time of deposition (in ISO8601 format).</td>
</tr>
<tr>
    <td><code>owner</code></td>
    <td>Integer</td>
    <td>No</td>
    <td>User identifier of the owner of the deposition.</td>
</tr>
<tr>
    <td><code>record_id</code></td>
    <td>Integer</td>
    <td>No</td>
    <td>Record identifier.  This field is only present for published depositions.</td>
</tr>
<tr>
    <td><code>record_url</code></td>
    <td>URL</td>
    <td>No</td>
    <td>URL to public version of record for this deposition. This field is only present for published depositions.</td>
</tr>
<tr>
    <td><code>state</code></td>
    <td>String</td>
    <td>No</td>
    <td>One of the values:<ul>
      <li><code>"inprogress"</code>: Deposition metadata can be updated. If deposition is also unsubmitted (see <code>submitted</code>) files can be updated as well. </li>
      <li><code>"done"</code>: Deposition has been published.</li></ul>
      <li><code>"error"</code>: Deposition is in an error state - contact our support.</li></ul>
    </td>
</tr>
<tr>
    <td><code>submitted</code></td>
    <td>Bool</td>
    <td>No</td>
    <td>True of deposition has been published, False otherwise.</td>
</tr>
<tr>
    <td><code>title</code></td>
    <td>String</td>
    <td>No</td>
    <td>Title of deposition (automatically set from <code>metadata</code>). Defaults to empty string.</td>
</tr>
</tbody>
</table>
</div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-r-meta">
          <h4 id="restapi-rep-meta">Deposition metadata <small></small> <span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-r-meta" class="panel-collapse collapse">
      <div class="panel-body">
<table class="table table-striped">
<thead>
<tr>
  <th class="span2">Attribute</th>
  <th>Type</th>
  <th>Required</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
    <td><code>upload_type</code></td>
    <td>String</td>
    <td>Yes</td>
    <td>Controlled vocabulary:<ul>
      <li><code>publication</code>: Publication</li>
      <li><code>poster</code>: Poster</li>
      <li><code>presentation</code>: Presentation</li>
      <li><code>dataset</code>: Dataset</li>
      <li><code>image</code>: Image</li>
      <li><code>video</code>: Video/Audio</li>
      <li><code>software</code>: Software</li>
    </ul></td>
</tr>
<tr>
    <td><code>publication_type</code></td>
    <td>String</td>
    <td>Yes, if <code>upload_type</code> is <code>"publication"</code>.</td>
    <td>Controlled vocabulary:<ul>
      <li><code>book</code>: Book</li>
<li><code>section</code>: Book section</li>
<li><code>conferencepaper</code>: Conference paper</li>
<li><code>article</code>: Journal article</li>
<li><code>patent</code>: Patent</li>
<li><code>preprint</code>: Preprint</li>
<li><code>report</code>: Report</li>
<li><code>softwaredocumentation</code>: Software documentation</li>
<li><code>thesis</code>: Thesis</li>
<li><code>technicalnote</code>: Technical note</li>
<li><code>workingpaper</code>: Working paper</li>
<li><code>other</code>: Other</li>
    </ul></td>
</tr>
<tr>
    <td><code>image_type</code></td>
    <td>String</td>
    <td>Yes, if <code>upload_type</code> is <code>"image"</code>.</td>
    <td>Controlled vocabulary:<ul>
      <li><code>figure</code>: Figure</li>
<li><code>plot</code>: Plot</li>
<li><code>drawing</code>: Drawing</li>
<li><code>diagram</code>: Diagram</li>
<li><code>photo</code>: Photo</li>
<li><code>other</code>: Other</li>
    </ul></td>
</tr>
<tr>
    <td><code>publication_date</code></td>
    <td>String</td>
    <td>Yes</td>
    <td>Date of publication in ISO8601 format (<code>YYYY-MM-DD</code>). Defaults to current date.</td>
</tr>
<tr>
    <td><code>title</code></td>
    <td>String</td>
    <td>Yes</td>
    <td>Title of deposition.</td>
</tr>
<tr>
    <td><code>creators</code></td>
    <td>Array of objects</td>
    <td>Yes</td>
    <td><p>The creators/authors of the deposition. Each array element is an object with the attributes:</p>
    <ul>
      <li><code>name</code>: Name of creator in the format <em>Family name, First names</em></li>
      <li><code>affiliation</code>: Affiliation of creator.</li>
    </ul>
    <p>Example:</p>
    <pre>[{'name':'Doe, John', 'affiliation': 'ZENODO'},
{'name':'Smith, Jane', 'affiliation': 'ZENODO'}]</pre></td>
</tr>
<tr>
    <td><code>description</code></td>
    <td>String</td>
    <td>Yes</td>
    <td>Abstract or description for deposition. Following HTML tags are allowed: <code>a</code>, <code>p</code>, <code>br</code>, <code>blockquote</code>, <code>strong</code>, <code>b</code>, <code>u</code>, <code>i</code>, <code>em</code>, <code>ul</code>, <code>ol</code>, <code>li</code>, <code>sub</code>, <code>sup</code>, <code>div</code>, <code>strike</code>.</td>
</tr>
<tr>
    <td><code>access_right</code></td>
    <td>String</td>
    <td>Yes</td>
    <td>Controlled vocabulary:<ul>
      <li><code>open</code>: Open Access</li>
<li><code>embargoed</code>: Embargoed Access</li>
<li><code>closed</code>: Closed Access</li>
    </ul>Defaults to <code>open</code>.</td>
</tr>
<tr>
    <td><code>license</code></td>
    <td>String</td>
    <td>Yes, if <code>access_right</code> is <code>"open"</code> or <code>"embargoed"</code>.</td>
    <td><p>Controlled vocabulary based on <a href="http://licenses.opendefinition.org/licenses/groups/all.json">http://licenses.opendefinition.org</a>. The selected license applies to all files in this deposition, but not to the metadata which is licensed under <a href="{{url_for('zenodo_base.terms')}}">Creative Commons Zero</a>. Further information about licenses is available at <a href="http://licenses.opendefinition.org/">Open Definition Licenses Service</a>.</p>
    <p>Defaults to <code>cc-by</code> for non-datasets and <code>cc-zero</code> for datasets.</p></td>
</tr>
<tr>
    <td><code>embargo_date</code></td>
    <td></td>
    <td>Yes, if <code>access_right</code> is <code>"embargoed"</code>.</td>
    <td>Date in ISO8601 format (<code>YYYY-MM-DD</code>) when the deposited files will be made automatically made publicly available by the system. Defaults to current date.</td>
</tr>
<tr>
    <td><code>doi</code></td>
    <td>String</td>
    <td>No</td>
    <td>Digital Object Identifier. Did a publisher already assign a DOI to your deposited files? If not, leave the field empty and we will register a new DOI for you when you publish. A DOI allow others to easily and unambiguously cite your deposition.</td>
</tr>
<tr>
    <td><code>prereserve_doi</code></td>
    <td>Object/Bool</td>
    <td>No</td>
    <td>Set to <code>true</code>, to reserve a Digital Object Identifier (DOI). The DOI is automatically generated by our system and cannot be changed. Also, The DOI is not registered with <a href="http://www.datacite.org">DataCite</a> until you publish your deposition, and thus cannot be used before then. Reserving a DOI is useful, if you need to include it in the files you upload, or if you need to provide a dataset DOI to your publisher but not yet publish your dataset. The response from the REST API will include the reserved DOI.</td>
</tr>
<tr>
    <td><code>keywords</code></td>
    <td>Array of strings</td>
    <td>No</td>
    <td><p>Free form keywords for this deposition. Example: </p><code>["Keyword 1", "Keyword 2"]</code></td>
</tr>
<tr>
    <td><code>notes</code></td>
    <td>String</td>
    <td>No</td>
    <td>Additional notes. No HTML allowed.</td>
</tr>
<tr>
    <td><code>related_identifiers</code></td>
    <td>Array of objects</td>
    <td>No</td>
    <td><p>Persistent identifiers of related publications and datasets. Supported identifiers include: DOI, Handle, ARK, PURL, ISSN, ISBN, PubMed ID, PubMed Central ID, ADS Bibliographic Code, arXiv, Life Science Identifiers (LSID), EAN-13, ISTC, URNs and URLs. Each array element is an object with the attributes:</p>
    <ul>
      <li><code>identifier</code>: The persistent identifier</li>
      <li><code>relation</code>: Relationship. Controlled vocabulary (<code>isCitedBy</code>, <code>cites</code>, <code>isSupplementTo</code>, <code>isSupplementedBy</code>).</li>
    </ul>
    <p>Example:</p>
    <pre>[
  {'relation': 'isSupplementTo', 'identifier':'10.1234/foo'},
  {'relation': 'cites', 'identifier':'doi10.1234/bar'}
]</pre><p>Note the identifier type (e.g. DOI) is automatically detected and validated by our system.</p></td>
</tr>
<tr>
    <td><code>communities</code></td>
    <td>Array of objects</td>
    <td>No</td>
    <td><p>List of communities you wish the deposition to appear. The owner of the community will be notified, and can either accept or reject your request. Each array element is an object with the attributes:</p>
    <ul>
      <li><code>identifier</code>: Community identifier</li>
    </ul>
    <p>Example:</p>
    <pre>[{'identifier':'ecfunded'}]</pre></td>
</tr>
<tr>
    <td><code>grants</code></td>
    <td>Array of objects</td>
    <td>No</td>
    <td><p>List of European Commission FP7 grants which have funded the research for this deposition. Each array element is an object with the attributes:</p>
    <ul>
      <li><code>id</code>: FP7 grant number.</li>
    </ul>
    <p>Example:</p>
    <pre>[{'id':'283595'}]</pre></td>
</tr>
<tr>
    <td><code>journal_title</code></td>
    <td>String</td>
    <td>No</td>
    <td>Journal title, if deposition is a published article.</td>
</tr>
<tr>
    <td><code>journal_volume</code></td>
    <td>String</td>
    <td>No</td>
    <td>Journal volume, if deposition is a published article.</td>
</tr>
<tr>
    <td><code>journal_issue</code></td>
    <td>String</td>
    <td>No</td>
    <td>Journal issue, if deposition is a published article.</td>
</tr>
<tr>
    <td><code>journal_pages</code></td>
    <td>String</td>
    <td>No</td>
    <td>Journal pages, if deposition is a published article.</td>
</tr>
<tr>
    <td><code>conference_title</code></td>
    <td>String</td>
    <td>No</td>
    <td>Title of conference (e.g. 20th International Conference on Computing in High Energy and Nuclear Physics).</td>
</tr>
<tr>
    <td><code>conference_acronym</code></td>
    <td>String</td>
    <td>No</td>
    <td>Acronym of conference (e.g. CHEP'13).</td>
</tr>
<tr>
    <td><code>conference_dates</code></td>
    <td>String</td>
    <td>No</td>
    <td>Dates of conference (e.g. 14-18 October 2013). Conference title or acronym must also be specified if this field is specified.</td>
</tr>
<tr>
    <td><code>conference_place</code></td>
    <td>String</td>
    <td>No</td>
    <td>Place of conference in the format city, country (e.g. Amsterdam, The Netherlands). Conference title or acronym must also be specified if this field is specified.</td>
</tr>
<tr>
    <td><code>conference_url</code></td>
    <td>String</td>
    <td>No</td>
    <td>URL of conference (e.g. http://www.chep2013.org/).</td>
</tr>
<tr>
    <td><code>imprint_publisher</code></td>
    <td>String</td>
    <td>No</td>
    <td>Publisher of a book/report/chapter</td>
</tr>
<tr>
    <td><code>imprint_isbn</code></td>
    <td>String</td>
    <td>No</td>
    <td>ISBN of a book/report</td>
</tr>
<tr>
    <td><code>imprint_place</code></td>
    <td>String</td>
    <td>No</td>
    <td>Place of publication of a book/report/chapter in the format city, country.</td>
</tr>
<tr>
    <td><code>partof_title</code></td>
    <td>String</td>
    <td>No</td>
    <td>Title of book for chapters</td>
</tr>
<tr>
    <td><code>partof_pages</code></td>
    <td>String</td>
    <td>No</td>
    <td>Pages numbers of book</td>
</tr>
<tr>
    <td><code>thesis_supervisors</code></td>
    <td>Array of objects</td>
    <td>No</td>
    <td>Supervisors of the thesis. Same format as for <code>creators</code>.</td>
</tr>
<tr>
    <td><code>thesis_university</code></td>
    <td>String</td>
    <td>No</td>
    <td>Awarding university of thesis.</td>
</tr>
</tbody>
</table>
</div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading info">
        <a class="panel-toggle collapsed" data-toggle="collapse" href="#collapse-r-files">
          <h4 id="restapi-rep-files">Deposition file<small></small> <span class="pull-right show-on-collapsed"><i class="icon-chevron-right"></i></span><span class="pull-right hide-on-collapsed"><i class="icon-chevron-down"></i></span></h4>
        </a>
    </div>
    <div id="collapse-r-files" class="panel-collapse collapse">
      <div class="panel-body">
<table class="table table-striped">
<thead>
<tr>
  <th class="span2">Attribute</th>
  <th>Type</th>
  <th>Editable</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
    <td><code>id</code></td>
    <td>String</td>
    <td>No</td>
    <td>Deposition file identifier</td>
</tr>
<tr>
    <td><code>filename</code></td>
    <td>String</td>
    <td>Yes</td>
    <td>Name of file</td>
</tr>
<tr>
    <td><code>filesize</code></td>
    <td>Integer</td>
    <td>No</td>
    <td>Size of files in bytes</td>
</tr>

<tr>
    <td><code>checksum</code></td>
    <td>String</td>
    <td>No</td>
    <td>MD5 checksum of file, computed by our system. This allows you to check the integrity of the uploaded file.</td>
</tr>
</tbody>
</table>
</div>
    </div>
  </div>
</div>

{#<h2 id="restapi-faq">FAQ</h2>

<dl>
  <dt>What is the difference between <em>deposition id</em> and <em>record id</em>?</dt>
  <dd></dd>
  <dt>Do you support versioning of files?</dt>
  <dd>No, though we plan to add it in the future.</dd>
  <dt>Can I edit the deposition after it is published?</dt>
  <dd></dd>
  <dt>Can I replace a file after a deposition is published?</dt>
  <dd></dd>
</dl>#}

<h2 id="restapi-changes">Changes</h2>
<dt>2013-12-18</dt>
<dd><p>REST API version 1.0 final release</p><ul>
<li>Deposition actions moved from <code>deposit/depositions/:id/action</code> to <code>deposit/depositions/:id/actions</code></li>
<li>Added <code>edit</code> and <code>discard</code> deposition action resources.</li>
<li>Deposition resource representation:<ul>
<li><code>state</code>: Controlled vocabulary changed.</li>
<li><code>submitted</code>: Data type changed from Timestamp to Bool.</li></ul></li>
<ul></dd>
<dt>2013-11-13</dt>
<dd><p>REST API initial release candidate</p></dd>
</dl>

<h2 id="harvest"><strong>OAI-PMH API</strong> <small>use OAI-PMH to harvest {{config.CFG_SITE_NAME}}</small></h2>
<hr/>
<p>
{{config.CFG_SITE_NAME}} allows you to harvest our entire repository via
the Open Archives Initiative Protocol for Metadata Harvesting (<a href="http://www.openarchives.org/pmh/">OAI-PMH</a>). OAI-PMH is a widely used protocol for harvesting metadata and most popular repository software provide support for this protocol.
</p>
<p>
All metadata is licensed under <a href="{{url_for('zenodo_base.terms')}}">Creative Commons Zero</a>, while the data files may be either open access and subject to a license described in the metadata or closed access and not available for download.
</p>
<h3 id="harvest-baseurl">Base URL</h3>
<p>
<pre align="center">
{{config.CFG_SITE_SECURE_URL}}/oai2d
</pre>
</p>

<h3 id="harvest-metadata">Metadata formats</h3>
Metadata for each record is available in several formats. The available formats include:

<dl>
<dt><code>oai_datacite</code></dt>
<dd><p>OAI DataCite &mdash; This metadata format has been specifically established for the dissemination of DataCite records using OAI-PMH. In addition to the original DataCite metadata, this format contains several other elements describing the version of the metadata, whether it is of reference quality, and the registering datacentre. For more information about this format and its schema please see the <a href="http://oai.datacite.org/">DataCite OAI schema</a> web site.</p>
<p><span class="label">Recommended</span> We recommend you harvest using this metadata format. The format contains the most complete metadata and is our primary supported format.</p>
<p><a href="view-source:{{config.CFG_SITE_SECURE_URL}}/oai2d?verb=ListRecords&metadataPrefix=oai_datacite&set=openaire_data">See example</a></p>
</dd>
<dt><code>datacite</code></dt>
<dd><p>DataCite v2.2 &mdash; This metadata format contains only the original DataCite metadata without additions or alterations. The schema for this format does not exist and metadata will not validate against it. Please note that this format is not OAI-PMH version 2.0 compliant.</p> <p>
<span class="label">Heads up!</span> We will be upgrading to <a href="http://schema.datacite.org/meta/kernel-3/index.html">DataCite Metadata Schema v3.0</a> and discontinue support for DataCite v2.2, hence please ensure your OAI-PMH client are capable of reading both versions. There are only few backwards incompatible changes between v3.0 and v2.2.
</p>
<p><a href="view-source:{{config.CFG_SITE_SECURE_URL}}/oai2d?verb=ListRecords&metadataPrefix=datacite&set=openaire_data">See example</a></p>
</dd>
<dt><code>oai_dc</code></dt>
<dd><p>Dublin Core &mdash; only minimal metadata is included in this format, and is primarily provided for clients which does not support <code>oai_datacite</code>.</p><p><a href="view-source:{{config.CFG_SITE_SECURE_URL}}/oai2d?verb=ListRecords&metadataPrefix=oai_dc&set=openaire">See example</a></p></dd>
</dl>

<h3 id="harvest-sets">Sets</h3>
<p>We support both harvesting of the <em>entire repository</em> as well as <em>selective harvesting</em> of communities.</p>
<dl>
<dt><code>zenodo</code></dt>
<dd><p>All of ZENODO</p><p><a href="view-source:{{config.CFG_SITE_SECURE_URL}}/oai2d?verb=ListRecords&metadataPrefix=oai_datacite&set=zenodo">See example</a></p></dd>
<dt><code>user-<em>&lt;identifier&gt;</em></code></dt>
<dd><p>Community sets &mdash; allows selective harvesting of specific communities. Replace <code><em>&lt;identifier&gt;</em></code> with the community identifier. Alternatively each community provides a direct harvesting API link on their front-page, which includes the correct community identifier.</p><p><a href="view-source:{{config.CFG_SITE_SECURE_URL}}/oai2d?verb=ListRecords&metadataPrefix=oai_datacite&set=user-cfa">See example</a></p></dd>
</dl>
<p>If you need selective harvesting and your use case is not supported by above sets, please <a href="{{url_for('zenodo_base.contact')}}">contact us</a> and we may possible set a specific set for you.</p>

<h3 id="harvest-schedule">Update schedule</h3>
Sets are updated once an hour.

<h3 id="harvest-ratelimit">Rate limit</h3>
The OAI-PMH API is rated limited to one request per 2 seconds. We would be grateful if you <a href="{{url_for('invenio_opeanire.contact')}}">notify us</a> that you are harvesting us and in which context. It allows us to take your use case into consideration for future developments.

<h3 id="harvest-changes">Changes</h3>
<dt>2013-05-08</dt>
<dd><p>Initial release of OAI-PMH API</p></dd>
</dl>

{#
<h2 id="metadata"><strong>Metadata API</strong> <small>machine readable formats of records</small></h2>
<hr/>
<p>Metadata for individual records are exportable in several different machine readable formats. All metadata is licensed under <a href="{{url_for('zenodo_base.terms')}}">Creative Commons Zero</a>, while the data files may be either open access and subject to a license described in the metadata or closed access and not available for download.
</p>

<h3 id="metadata-url">URL pattern</h3>
<pre align="center">
{{config.CFG_SITE_SECURE_URL}}/record/<em>&lt;record id&gt;</em>/export/<em>&lt;format id&gt;</em>
</pre>
<p>Please replace <code>&lt;record id&gt;</code> with the record id of interest (e.g. obtained from the REST API), and replace <code>&lt;format id&gt;</code> with one of the metadata formats listed below.</p>

<h3 id="metadata-metadata">Metadata formats</h3>
The following metadata formats are supported:

<dl>
<dt><code>dcite</code></dt>
<dd><p>DataCite Metadata v2.2. The format contains the most complete metadata and is our primary supported format.</p> <p>
<span class="label label-info">Heads up!</span> We will be upgrading to <a href="http://schema.datacite.org/meta/kernel-3/index.html">DataCite Metadata Schema v3.0</a> and discontinue support for DataCite v2.2, hence please ensure you can parse both versions. There are only few backwards incompatible changes between v3.0 and v2.2.
</p>
<p><a href="">See example</a></p>
</dd>
<dt><code>dc</code></dt>
<dd><p>Dublin Core &mdash; only minimal metadata is included in this format, and is primarily provided for clients which does not support <code>dcite</code>.</p><p><a href="">See example</a></p></dd>
<dt><code>xm</code></dt>
<dd><p>MARC XML  &mdash;</p>
<p><a href="">See example</a></p></dd>
</dl>

<h3 id="metadata-changes">Changes</h3>
<dt>2013-05-08</dt>
<dd><p>Initial release of Metadata API</p></dd>
</dl>
#}
</div>
</div>




{% endblock %}